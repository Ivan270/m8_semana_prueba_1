<nav class='navbar navbar-expand-lg bg-body-tertiary'>
	<div class='container-fluid'>
		<img
			src='/public/images/icono.ico'
			alt='Bootstrap'
			width='30'
			height='24'
		/>
		<button
			class='navbar-toggler'
			type='button'
			data-bs-toggle='collapse'
			data-bs-target='#navbarSupportedContent'
			aria-controls='navbarSupportedContent'
			aria-expanded='false'
			aria-label='Toggle navigation'
		>
			<span class='navbar-toggler-icon'></span>
		</button>
		<div class='collapse navbar-collapse' id='navbarSupportedContent'>
			<ul class='navbar-nav ms-auto mb-2 mb-lg-0'>
				<li class='nav-item'>
					<a class='nav-link active' aria-current='page' href='/'>Inicio</a>
				</li>
				<li class='nav-item'>
					<a class='nav-link' id='linkProductos' href='/productos'>Productos</a>
				</li>
				<li class='nav-item'>
					<a class='nav-link' id='linkPerfil' href=''>Perfil</a>
				</li>
				<li class='nav-item'>
					<a
						class='nav-link text-success my-2 me-2 py-0'
						id='linkLogin'
						href='/login'
					>Login</a>
				</li>
				<li class='nav-item'>
					<a
						class='nav-link text-warning rounded-3 my-2 py-0'
						id='linkLogout'
						href=''
					>Logout</a>
				</li>

			</ul>

		</div>
	</div>
</nav>
<script>
	// Desactivar botones de login dependiendo del estado del token (si hay o no sesion activa)
	let token = localStorage.getItem('token');
	
	if(token){
		linkLogin.classList.add('d-none')
	}else{
		linkLogout.classList.add('d-none')
		linkPerfil.classList.add('d-none')
	}

	// Para logout se elimina token del localstorage
	linkLogout.addEventListener('click', (event)=>{
		event.preventDefault();
		localStorage.removeItem('token');
		alert('Ha cerrado sesión')
		// recarga vista
		location.href='/'
	})

	linkPerfil.addEventListener('click', (event)=>{
		event.preventDefault();
		if(token){
			// Redirige a página de perfil enviando el token por query string
			location.href=`/perfil?token=${token}`	
		}	
	})
</script>